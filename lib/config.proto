syntax = "proto2";

import "lib/decoders/decoders.proto";
import "lib/encoders/encoders.proto";
import "lib/imagereader/img.proto";
import "lib/fluxsource/fluxsource.proto";
import "lib/common.proto";

message Config {
	message InputFile {
		optional string filename = 1;
		oneof format {
			ImgInputOutput img = 2;
		}
	}

	message InputDisk {
		oneof source {
			string fluxfile = 1;
			int32 drive = 2 [default = 0];
			TestPatternInput test_pattern = 3;
		}
	}

	message OutputFile {
		optional string filename = 1;
		oneof format {
			ImgInputOutput img = 2;
		}
	}

	message OutputDisk {
		oneof dest {
			string fluxfile = 1;
			int32 drive = 2;
		}
	}

	message Input {
		oneof input {
			InputFile file = 1;
			InputDisk disk = 2;
		}
	}

	message Output {
		oneof output {
			OutputFile file = 1;
			OutputDisk disk = 2;
		}
	}

	optional Input input = 1;
	optional Output output = 2;
	optional Encoder encoder = 3;
	optional Decoder decoder = 4;

	optional Range cylinders = 5;
	optional Range heads = 6;
}

