syntax = "proto2";

import "lib/decoders/decoders.proto";
import "lib/encoders/encoders.proto";
import "lib/imagereader/imagereader.proto";
import "lib/imagewriter/imagewriter.proto";
import "lib/fluxsource/fluxsource.proto";
import "lib/usb/usb.proto";
import "lib/common.proto";

message InputDiskProto {
	oneof source {
		string fluxfile = 1;
		HardwareInputProto drive = 2;
		TestPatternInputProto test_pattern = 3;
	}
}

message OutputDiskProto {
	oneof dest {
		string fluxfile = 1;
		int32 drive = 2;
	}
}

message InputProto {
	oneof input {
		InputFileProto file = 1;
		InputDiskProto disk = 2;
	}
}

message OutputProto {
	oneof output {
		OutputFileProto file = 1;
		OutputDiskProto disk = 2;
	}
}

message ConfigProto {
	optional InputProto input = 1;
	optional OutputProto output = 2;
	optional EncoderProto encoder = 3;
	optional DecoderProto decoder = 4;
	optional UsbProto usb = 5;

	optional RangeProto cylinders = 6;
	optional RangeProto heads = 7;
}

